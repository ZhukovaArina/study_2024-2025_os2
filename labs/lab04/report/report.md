---
## Front matter
title: "Лабораторная работа №4. Работа с программными пакетами"
subtitle: "Дисциплина: Основы администрирования операционных систем"
author: "Жукова Арина Александровна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Получить навыки работы с репозиториями и менеджерами пакетов.

# Задание

1. Изучите, как и в каких файлах подключаются репозитории для установки программного обеспечения; изучите основные возможности (поиск, установка, обновление, удаление пакета, работа с историей действий) команды dnf (см. раздел 4.4.1).
2. Изучите и повторите процесс установки/удаления определённого пакета с использованием возможностей dnf (см. раздел 4.4.1).
3. Изучите и повторите процесс установки/удаления определённого пакета с использованием возможностей rpm (см. раздел 4.4.2).

# Выполнение лабораторной работы

## Работа с репозиториями

1. В консоли переходим в режим работы суперпользователя. Переходим в каталог /etc/yum.repos.d и просматриваем содержимое (рис. [-@fig:001]).

![Содержимое каталога](image/Снимок экрана 2024-09-28 143554.png){#fig:001 width=100%}

2. Выводим на экран список репозиториев (рис. [-@fig:002]).

![Список репозиториев](image/Снимок экрана 2024-09-28 143651.png){#fig:002 width=100%}

3. Выводим на экран список пакетов, в названии или описании которых есть слово user (рис. [-@fig:003]).

![Список пакетов](image/Снимок экрана 2024-09-28 143755.png){#fig:003 width=70%}

4. Установливаем nmap, предварительно изучив информацию по имеющимся пакетам:

dnf search nmap, dnf info nmap (рис. [-@fig:0041])
dnf install nmap (рис. [-@fig:0042])

![Выполнение команды dnf search nmap и dnf info nmap](image/Снимок экрана 2024-09-28 144044.png){#fig:0041 width=70%}

![Выполнение команды dnf install nmap](image/Снимок экрана 2024-09-28 144122.png){#fig:0042 width=70%}

• dnf install nmap - устанавливает пакет nmap.

• dnf install nmap\* - устанавливает все пакеты, начинающиеся с "nmap".

5. Удаляем nmap (рис. [-@fig:005])

![Удаление nmap](image/Снимок экрана 2024-09-28 144208.png){#fig:005 width=70%}

6. Получаем список имеющихся групп пакетов, затем установливаем группу пакетов RPM Development Tools (рис. [-@fig:0061]-[-@fig:0063])

![Список имеющихся групп](image/Снимок экрана 2024-09-28 144250.png){#fig:0061 width=70%}

![Список имеющихся групп](image/Снимок экрана 2024-09-28 144328.png){#fig:0062 width=70%}

![Информация о группе и установка группы пакетов](image/Снимок экрана 2024-09-28 144415.png){#fig:0063 width=70%}

Удаляем группу пакетов RPM Development Tools (рис. [-@fig:0064])

![Удаление группы пакетов](image/Снимок экрана 2024-09-28 144455.png){#fig:0064 width=70%}

7. Посмотриваем историю использования команды dnf (рис. [-@fig:007])

![Просмотр истории команды](image/Снимок экрана 2024-09-28 144640.png){#fig:007 width=70%}

Отменяем последнее, десятое по счёту, действие(рис. [-@fig:0071])

![Отмена действия](image/Снимок экрана 2024-09-28 144631.png){#fig:0071 width=70%}

##  Использование rpm

### Установка rpm-пакета lynx

1. Скачиваем rpm-пакет lynx (рис. [-@fig:011])

![Скачивание пакета lynx](image/Снимок экрана 2024-09-28 144739.png){#fig:011 width=70%}

2. Найдём каталог, в который был помещён пакет после загрузки, перейдем в найденный каталог и установим пакет (рис. [-@fig:012])

![Поиск и установка rpm-пакета](image/Снимок экрана 2024-09-28 144829.png){#fig:012 width=70%}

3. Определяем расположение исполняемого файла, определяем принадлежность к пакету lynx и получение доп. информации о содержимом пакета (рис. [-@fig:013])

![Расположение файла, принадлежность пакета, доп информация](image/Снимок экрана 2024-09-28 145127.png){#fig:013 width=70%}

4. Получаем список всех файлов в пакете, используя (рис. [-@fig:014])

![Выполнение команды rpm -ql lynx](image/Снимок экрана 2024-09-28 145215.png){#fig:014 width=70%}

Выводим перечень файлов с документацией пакета (рис. [-@fig:0141])

![Выполнение команды rpm -qd lynx](image/Снимок экрана 2024-09-28 145253.png){#fig:0141 width=70%}

Просматриваем файлы документации (рис. [-@fig:0142])

![Выполнение команды man lynx](image/Снимок экрана 2024-09-28 145402.png){#fig:0142 width=60%}

5. Выводим на экран перечень и месторасположение конфигурационных файлов пакета (рис. [-@fig:015])

![Выполнение команды rpm -qc lynx](image/Снимок экрана 2024-09-28 145441.png){#fig:015 width=100%}

6. Выводим на экран расположение и содержание скриптов, выполняемых при установке пакета (рис. [-@fig:016])

![Выполнение команды rpm -q --scripts lynx](image/Снимок экрана 2024-09-28 144208.png){#fig:016 width=70%}

Скриптов обнаружено не было.

7. В отдельном терминале под своей учётной записью запускаем текстовый браузер lynx, чтобы проверить корректность установки пакета (рис. [-@fig:017])

![Запуск текстового браузера](image/Снимок экрана 2024-09-28 145815.png){#fig:017 width=70%}

8. Возвращаемся в терминал с учётной записью root и удаляем пакет (рис. [-@fig:018])

![Удаление пакета](image/Снимок экрана 2024-09-28 145924.png){#fig:018 width=70%}

### Установка rpm-пакета dnsmasq

1. Установливаем пакет dnsmasq (рис. [-@fig:021])

![Установка пакета](image/Снимок экрана 2024-09-28 150018.png){#fig:021 width=70%}

Определяем расположение исполняемого файла (рис. [-@fig:0211])

![Выполнение команды which dnsmasq](image/Снимок экрана 2024-09-28 150024.png){#fig:0211 width=70%}

2. Определяем по имени файла, к какому пакету принадлежит dnsmasq и получаем дополнительную информацию о содержимом пакета (рис. [-@fig:022])

![Выполнение команды rpm -qf $(which dnsmasq) и rpm -qi dnsmasq](image/Снимок экрана 2024-09-28 150225.png){#fig:022 width=70%}

3. Получаем список всех файлов в пакете (рис. [-@fig:023])

![Выполнение команды rpm -ql dnsmasq](image/Снимок экрана 2024-09-28 150251.png){#fig:023 width=70%}

Выводим перечень файлов с документацией пакета (рис. [-@fig:0231])

![Выполнение команды rpm -qd dnsmasq](image/Снимок экрана 2024-09-28 150318.png){#fig:0231 width=70%}

Просматриваем файлы документации (рис. [-@fig:0232])

![Выполнеие команды man dnsmasq](image/Снимок экрана 2024-09-28 150338.png){#fig:0232 width=70%}

4. Выводим на экран перечень и месторасположение конфигурационных файлов пакета (рис. [-@fig:024])

![Выполнение команды rpm -qc dnsmasq](image/Снимок экрана 2024-09-28 150408.png){#fig:024 width=70%}

5. Выводим на экран расположение и содержание скриптов, выполняемых при установке пакета (рис. [-@fig:025])

![Выполнение команды rpm -q --scripts dnsmasq](image/Снимок экрана 2024-09-28 150458.png){#fig:025 width=70%}

Префикс скрипта: Скрипты обычно имеют префикс pre (пре-скрипт, выполняемый перед установкой), post (пост-скрипт, выполняемый после установки), preun (пре-скрипт для удаления, выполняемый перед удалением), postun (пост-скрипт для удаления, выполняемый после удаления).

preinstall scriptlet:  создаёт пользователей, чтобы rpm мог устанавливать файлы, принадлежащие этому пользователю.

postinstall scriptlet: первоначальная установка.

preuninstall scriptlet: удаление пакета, без обновления

postuninstall scriptlet: Обновление пакета, без удаления

6. Возвращаемся в терминал с учётной записью root и удаляем пакет (рис. [-@fig:026])

![Удаление пакета](image/Снимок экрана 2024-09-28 150633.png){#fig:026 width=70%}

## Контрольные вопросы

1. `rpm -qf /usr/sbin/useradd` - Эта команда показывает имя пакета, содержащего файл /usr/sbin/useradd.

2. `dnf group info "Security Tools"` - Эта команда показывает информацию о группе dnf "Security Tools", включая список пакетов, входящих в нее.

3. `rpm -ivh имя_файла.rpm` - Эта команда устанавливает rpm-пакет, загруженный из интернета. 
  - -i - устанавливает пакет.
  - -v - выводит более подробную информацию о процессе установки.
  - -h - показывает индикатор выполнения процесса.

4. `rpm -qp --scripts имя_файла.rpm` - Эта команда показывает содержимое сценариев, включенных в rpm-пакет. Вы можете проанализировать сценарии на предмет вредоносного кода.

5. `rpm -qp --doc имя_файла.rpm` - Эта команда выводит документацию, включенную в rpm-пакет.

6. `rpm -qf имя_файла` - Эта команда выводит имя пакета, которому принадлежит файл имя_файла. 


# Выводы

В ходе выполнения лабораторной работы были получены навыки работы с репозиториями и менеджерами пакетов. Было изучено использование команд dnf и rpm для установки, удаления, поиска и управления пакетами. Также был получен опыт работы с группами пакетов, просмотра истории действий с пакетами и использования скриптов установки.

# Список литературы{.unnumbered}

1. Neil N. J. Learning CentOS: A Beginners Guide to Learning Linux. — CreateSpace Independent Publishing Platform, 2016.
2. Vugt S. van. Red Hat RHCSA/RHCE 7 cert guide : Red Hat Enterprise Linux 7 (EX200 and EX300). — Pearson IT Certification, 2016. — (Certification Guide).
3. Goyal S. K. Precise Guide to Centos 7: Beginners guide and quick reference. — Independently published, 2017.
4. Unix и Linux: руководство системного администратора / Э. Немет, Г. Снайдер, Т.Хейн, Б. Уэйли, Д. Макни. — 5-е изд. — СПб. : ООО «Диалектика», 2020.

::: {#refs}
:::
